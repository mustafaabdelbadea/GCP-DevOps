apiVersion: apps/v1
kind: Deployment
metadata:
  name: jenkins-deployment
  labels:
    app: jenkins
  namespace: jenkins-deployment
spec:
  replicas: 1
  selector:
    matchLabels:
      app: jenkins
  template:
    metadata:
      labels:
        app: jenkins
    spec:
      serviceAccountName: jenkins-svc-account
      containers:
      - name: jenkins
        image: jenkins/jenkins:jdk11
        ports:
        - containerPort: 8080
        securityContext:
          allowPrivilegeEscalation: false
          runAsUser: 0
        # command:
        #   - /bin/bash
        #   - -c
        #   - curl -LO "https://dl.k8s.io/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl.sha256"
        #       # echo "$(cat kubectl.sha256)  kubectl" | sha256sum --check

        # lifecycle:
        #   postStart:
        #     exec:
        #       command: ["/bin/bash", '-c' , 'curl -LO "https://dl.k8s.io/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl.sha256" ']
